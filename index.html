<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>NBA Player Performance Analytics</title>

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body {
    margin: 0;
    background: #020617;
    overflow-x: hidden;
    font-family: ui-sans-serif, system-ui;
}

/* BACKGROUND */
.bg-court {
    position: fixed;
    inset: -5%;
    background: url(Media/ryan-OywyPkrDEvg-unsplash.jpg) center/cover no-repeat;
    animation: courtMotion 35s ease-in-out infinite;
    z-index: -5;
    filter: brightness(.85) contrast(1.05) saturate(1.1);
}
@keyframes courtMotion {
    0%{transform:scale(1)}
    50%{transform:scale(1.1)}
    100%{transform:scale(1)}
}
.bg-overlay {
    position: fixed;
    inset: 0;
    background: rgba(2,6,23,.82);
    z-index: -4;
}
.spotlight {
    position: fixed;
    inset: 0;
    background: radial-gradient(circle at 30% 10%, rgba(255,255,255,.08), transparent 45%);
    animation: moveLight 14s ease-in-out infinite alternate;
    z-index: -3;
}
@keyframes moveLight {
    from{background-position:20% 0%}
    to{background-position:80% 30%}
}
#dust {
    position: fixed;
    inset: 0;
    z-index: -2;
    pointer-events: none;
}

/* UI EFFECT */
.glow { box-shadow: 0 0 60px rgba(99,102,241,.35); }
.slide-up { animation: slideUp 1s ease forwards; }
@keyframes slideUp {
    from{opacity:0;transform:translateY(50px)}
    to{opacity:1;transform:translateY(0)}
}
.pop { animation: pop .4s ease }
@keyframes pop {
    from{transform:scale(.8);opacity:0}
    to{transform:scale(1);opacity:1}
}
</style>
</head>

<body class="text-slate-100 min-h-screen">

<!-- BACKGROUND -->
<div class="bg-court"></div>
<div class="bg-overlay"></div>
<div class="spotlight"></div>
<canvas id="dust"></canvas>

<!-- MUSIC -->
<audio id="bgMusic" loop autoplay>
    <source src="Media/sport-sports-rock-trailer-363218.mp3" type="audio/mpeg">
</audio>

<button onclick="toggleMusic()"
 class="fixed top-5 right-5 z-50 bg-indigo-600/90 backdrop-blur
 px-4 py-2 rounded-full hover:bg-indigo-700 transition">
üéµ Music
</button>

<!-- HERO -->
<header class="relative z-10 text-center py-24">
<h1 class="text-6xl font-extrabold mb-6">üèÄ NBA Player Analytics</h1>
<p class="text-slate-400 max-w-2xl mx-auto text-lg">
Predict <span class="text-indigo-400 font-semibold">NBA Points Per Game (PPG)</span>
using Machine Learning (Linear Regression)
</p>
</header>

<!-- MAIN -->
<main class="relative z-10 max-w-7xl mx-auto px-8 pb-24 grid grid-cols-1 lg:grid-cols-2 gap-20">

<!-- FORM -->
<section class="slide-up">
<h2 class="text-3xl font-extrabold mb-3"> Player Performance Prediction üî•</h2>
<p class="text-slate-400 mb-10 max-w-md">
AI predicts player scoring output based on real performance indicators.
</p>

<div class="relative max-w-md">
<div class="absolute inset-0 rounded-3xl bg-gradient-to-br
 from-indigo-500 via-purple-500 to-pink-500 blur opacity-40"></div>

<div class="relative bg-slate-950/80 backdrop-blur-xl border border-white/10
 rounded-3xl p-10 glow space-y-10">

<form id="predictForm" class="space-y-10">

<div>
<div class="flex justify-between mb-2">
<label class="text-slate-400">‚è± Minutes Played</label>
<span id="minVal" class="text-indigo-400 font-semibold">24</span>
</div>
<input id="base_min" type="range" min="0" max="48" step="0.5" value="24"
 class="w-full accent-indigo-500">
</div>

<div>
<div class="flex justify-between mb-2">
<label class="text-slate-400">üßì Player Age</label>
<span id="ageVal" class="text-green-400 font-semibold">26</span>
</div>
<input id="base_age" type="range" min="18" max="40" value="26"
 class="w-full accent-green-500">
</div>

<div>
<div class="flex justify-between mb-2">
<label class="text-slate-400">üìä Games Played</label>
<span id="gpVal" class="text-amber-400 font-semibold">60</span>
</div>
<input id="base_gp" type="range" min="1" max="82" value="60"
 class="w-full accent-amber-500">
</div>

<button class="w-full py-4 rounded-2xl font-extrabold tracking-widest
 bg-gradient-to-r from-indigo-500 via-purple-600 to-pink-500
 hover:scale-105 active:scale-95 transition">
RUN PREDICTION
</button>

</form>
</div>
</div>
</section>

<!-- RESULT -->
<section class="slide-up bg-slate-900/60 border border-slate-800
 rounded-3xl p-12 glow">

<h3 class="uppercase text-sm tracking-widest text-slate-400 mb-4">
Prediction Output
</h3>

<div id="points" class="text-7xl font-extrabold text-indigo-400 mb-2">‚Äî</div>
<div id="confidence" class="text-green-400 font-semibold mb-6"></div>

<canvas id="chart" height="120"></canvas>

<div class="mt-8 border-t border-slate-700 pt-6 text-sm text-slate-300">
<h4 class="font-bold mb-3">üß† Explainable AI</h4>
<ul id="explain" class="space-y-2"></ul>
</div>
</section>

</main>

<script>
/* MUSIC */
const music=document.getElementById("bgMusic");
let playing=true; music.volume=.25;
function toggleMusic(){ playing?music.pause():music.play(); playing=!playing }

/* SLIDER SYNC */
const minI=base_min, ageI=base_age, gpI=base_gp;
const minV=minVal, ageV=ageVal, gpV=gpVal;
function sync(){minV.innerText=minI.value; ageV.innerText=ageI.value; gpV.innerText=gpI.value}
[minI,ageI,gpI].forEach(i=>i.addEventListener("input",sync)); sync();

/* DUST */
const dust=document.getElementById("dust"), ctx=dust.getContext("2d");
function resize(){dust.width=innerWidth; dust.height=innerHeight}
resize(); addEventListener("resize",resize);
let p=Array.from({length:50},()=>({x:Math.random()*dust.width,y:Math.random()*dust.height,r:Math.random()*2+.5,dx:Math.random()*.2,dy:Math.random()*.2,o:Math.random()*.25+.05}));
(function anim(){
ctx.clearRect(0,0,dust.width,dust.height);
p.forEach(a=>{
a.x+=a.dx; a.y+=a.dy;
if(a.x>dust.width)a.x=0; if(a.y>dust.height)a.y=0;
ctx.beginPath(); ctx.arc(a.x,a.y,a.r,0,Math.PI*2);
ctx.fillStyle=`rgba(255,255,255,${a.o})`; ctx.fill();
}); requestAnimationFrame(anim);
})();

/* PREDICTION */
let chart;
predictForm.addEventListener("submit",async e=>{
e.preventDefault();
const res=await fetch("http://localhost:8000/predict",{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({base_min:+minI.value,base_age:+ageI.value,base_gp:+gpI.value})
});
const r=await res.json();
points.innerText=r.predicted_points.toFixed(2); points.classList.add("pop");
confidence.innerText=`üéØ Confidence: ${Math.min(95,Math.max(65,100-Math.abs(25-r.predicted_points))).toFixed(1)}%`;

if(chart) chart.destroy();
chart=new Chart(document.getElementById("chart"),{
type:"bar",
data:{labels:["Minutes","Age","Games"],datasets:[{data:[minI.value,ageI.value,gpI.value],backgroundColor:["#6366f1","#22c55e","#f59e0b"]}]},
options:{plugins:{legend:{display:false}},animation:{duration:1200}}
});

explain.innerHTML=`
<li>‚è± More minutes increase scoring opportunity</li>
<li>üìä Games played stabilizes performance</li>
<li>üßì Age reflects efficiency & stamina</li>`;
});
</script>

</body>
</html>
